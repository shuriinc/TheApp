<ion-view ng-controller="TagEditCtrl as vm">
    <ion-nav-title>
        {{vm.title}}
    </ion-nav-title>
    <ion-header-bar class="bar-subheader item-input-inset bar-dark" ng-if="vm.tag">
        <!-- <h1 class="title">{{vm.title}}</h1> -->
        <div class="button-bar">
           <div ng-click="vm.cancel()" class="button button-clear button-stable icon ion-close-round">&nbsp;&nbsp;{{vm.wordFor("Cancel")}}</div>
           <div ng-click="vm.save()" click-once ng-disabled="!vm.isDirty" class="button button-clear icon ion-checkmark-round ok-confirm">&nbsp;&nbsp;{{vm.wordFor("Save")}}</div>
       </div>
    </ion-header-bar>
    <ion-content class="has-header has-subheader">
        <ion-list>
            <form ng-submit="vm.save()">
                <div class="item item-input item-stacked-label">
                    <span class="input-label itemLabel">{{vm.wordFor("Name")}}</span>
                    <input type="text" ng-model="vm.tag.name" ng-change="vm.isDirty = true;">
                </div>
                <div class="item item-input item-stacked-label">
                    <span class="input-label itemLabel">{{vm.wordFor("Description")}}</span>
                    <textarea class="medText" ng-model="vm.tag.description" rows="8" ng-change="vm.isDirty = true;" maxlength="4000"></textarea>
               </div>

                <!--<label class="item item-input item-select ">
                    <div class="input-label">
                      <span class="input-label itemLabel">{{vm.wordFor("Tag")}}  {{vm.wordFor("Set")}}</span><br /><br />
                    </div>
                    <select ng-options="ut.id as ut.text for ut in vm.tagUTs | orderBy: 'name'" ng-model="vm.tag.userType_Id" ng-change="vm.typeChanged(); "></select>
                </label>-->
                <owned-item ng-if="vm.isLooseTag" entity="vm.tag" entity-type="5" updatable="true" is-dirty="vm.isDirty"></owned-item>

            </form>

            <div  ng-if="vm.ownsTag" class="item text-center item-stable button-bar">
                <div class="button button-clear button-assertive  icon ion-trash-a "
                        ng-click="vm.deleteTag(vm.tag)"> Delete
                </div>
            </div>

            <list-footer>
            </list-footer>

         </ion-list>
    </ion-content>
</ion-view>
